# Storefront - Інтернет-магазин

Сучасний інтернет-магазин побудований на Next.js 16 з React 19 та TypeScript.

## Особливості

- **5000+ товарів** у 86 категоріях
- **100 акцій та промокодів**
- **Кошик покупок** з синхронізацією через API
- **Адмін-панель** для управління магазином
- **EAV (Entity-Attribute-Value)** - гнучка система атрибутів товарів
- **WMS (Warehouse Management System)** - повноцінна система управління складом
- **POS (Point of Sale)** - касова система для роздрібної торгівлі
- **Мобільний сканер** - сканування штрих-кодів телефоном
- **Повністю українізований** інтерфейс
- **Адаптивний дизайн** для мобільних та десктоп пристроїв
- **Покриття тестами** 97%+
- **Програма лояльності** - бали, рівні, бонуси
- **Подарункові сертифікати** - купівля та використання
- **Email маркетинг** - кампанії та автоматизації
- **SEO оптимізація** - мета-теги, JSON-LD, sitemap
- **PWA** - офлайн режим, push-сповіщення
- **Docker** - контейнеризація для production

## Технології

- **Next.js 16** - App Router
- **React 19** - Server Components
- **TypeScript** - строга типізація
- **Tailwind CSS** - стилізація (teal колірна схема)
- **Jest + React Testing Library** - тестування

## Структура проекту

```
storefront/
├── app/                      # Next.js App Router сторінки
│   ├── admin/               # Адмін-панель
│   │   ├── analytics/       # Аналітика
│   │   ├── attributes/      # Управління атрибутами (EAV)
│   │   ├── categories/      # Управління категоріями
│   │   ├── content/         # Контент-менеджмент
│   │   ├── customers/       # Клієнти
│   │   ├── import/          # Імпорт даних
│   │   ├── integrations/    # Інтеграції
│   │   ├── orders/          # Замовлення
│   │   ├── products/        # Товари
│   │   ├── promo/           # Акції та промокоди
│   │   ├── reviews/         # Відгуки
│   │   ├── settings/        # Налаштування
│   │   ├── support/         # Підтримка
│   │   ├── users/           # Користувачі
│   │   └── warehouse/       # WMS (Система управління складом)
│   │       ├── inventory/   # Інвентаризація
│   │       ├── locations/   # Місця зберігання
│   │       ├── movements/   # Історія переміщень
│   │       ├── pos/         # POS (Каса)
│   │       ├── purchases/   # Закупівлі
│   │       ├── receipt/     # Приймання товару
│   │       ├── reports/     # Звіти та аналітика
│   │       ├── reservations/# Резервування
│   │       ├── scanner/     # Мобільний сканер
│   │       ├── serials/     # Серійні номери
│   │       ├── settings/    # Налаштування складу
│   │       ├── shipment/    # Відвантаження
│   │       ├── stock/       # Залишки
│   │       ├── suppliers/   # Постачальники
│   │       ├── transfer/    # Переміщення
│   │       ├── warehouses/  # Склади
│   │       └── writeoff/    # Списання
│   ├── cart/                # Кошик
│   ├── category/[slug]/     # Сторінка категорії
│   ├── checkout/            # Оформлення замовлення
│   ├── order-status/        # Статус замовлення
│   └── product/[id]/        # Сторінка товару
├── components/              # React компоненти
│   ├── Footer.tsx
│   ├── Header.tsx
│   ├── HeroSection.tsx
│   ├── ProductCard.tsx
│   ├── PromoSection.tsx
│   └── SearchFilter.tsx
├── lib/                     # Утиліти та сервіси
│   ├── api.ts              # API функції
│   ├── cart-context.tsx    # Контекст кошика
│   └── mock-data.ts        # Мок-дані (5000 товарів)
├── docs/                    # Документація
│   └── eav-manual-testing.md  # Ручне тестування EAV
└── __tests__/              # Тести
    ├── admin/
    │   └── attributes/
    │       └── attributes-page.test.tsx
    ├── category/
    │   └── category-filters.test.tsx
    ├── product/
    │   └── product-page.test.tsx
    ├── components/
    │   └── ProductCard.test.tsx
    └── lib/
        ├── api.test.ts
        ├── cart-context.test.tsx
        └── mock-data.test.ts
```

## Запуск

### Розробка

```bash
# Встановити залежності
npm install

# Запустити dev сервер
npm run dev
```

Відкрийте [http://localhost:3000](http://localhost:3000) у браузері.

### Production Build

```bash
npm run build
npm start
```

## Тестування

```bash
# Запустити всі тести
npm test

# Тести з покриттям
npm test -- --coverage

# Watch mode
npm test -- --watch
```

### Покриття коду

**Загальне покриття: 97%+ (199 тестів)**

| Модуль | Statements | Branches | Functions | Lines |
|--------|-----------|----------|-----------|-------|
| lib/mock-data.ts | 100% | 88.57% | 100% | 100% |
| lib/api.ts | 100% | 93.54% | 100% | 100% |
| lib/cart-context.tsx | 94.11% | 71.42% | 100% | 100% |
| components/Footer.tsx | 100% | 100% | 100% | 100% |
| components/HeroSection.tsx | 100% | 100% | 100% | 100% |
| components/PromoSection.tsx | 100% | 100% | 100% | 100% |
| components/SearchFilter.tsx | 100% | 100% | 100% | 100% |
| components/ProductCard.tsx | 94.44% | 92.3% | 85.71% | 100% |
| components/Header.tsx | 76.08% | 83.33% | 68% | 76.08% |

## API

### Продукти

```typescript
// Отримати всі продукти
const products = await fetchProducts();

// Отримати продукт за ID
const product = await fetchProductById('prod-123');

// Пошук продуктів
const results = await searchProducts('Apple');

// Продукти за категорією
const categoryProducts = getProductsByCategory('cat-1-1');
```

### Кошик

```typescript
// Використання в компонентах
const { items, addToCart, removeFromCart, updateQuantity, clearCart, totalItems, totalPrice } = useCart();

// Додати товар
addToCart(product);

// Оновити кількість
updateQuantity('prod-123', 5);

// Видалити товар
removeFromCart('prod-123');
```

### Категорії

```typescript
// Кореневі категорії
const rootCategories = getRootCategories();

// Підкатегорії
const subcategories = getSubcategories('cat-1');

// Категорія за ID
const category = getCategoryById('cat-1-1');
```

### Акції

```typescript
// Активні акції
const activePromos = getActivePromotions();

// Акція за промокодом
const promo = getPromotionByCode('SALE20');
```

## Мок-дані

Проект містить генератор мок-даних з seed-based рандомізацією для консистентності:

- **86 категорій** (13 основних + 73 підкатегорії)
- **5000 товарів** з реалістичними характеристиками
- **100 акцій** різних типів (percentage, fixed, bundle, gift)

### Категорії товарів

1. Смартфони та телефони
2. Ноутбуки та комп'ютери
3. Телевізори та аудіо
4. Техніка для кухні
5. Техніка для дому
6. Краса та здоров'я
7. Дитячі товари
8. Спорт та відпочинок
9. Одяг та взуття
10. Автотовари
11. Інструменти та ремонт
12. Зоотовари
13. Канцтовари та книги

## Адмін-панель

Адмін-панель доступна за адресою `/admin` і включає:

- **Товари** - CRUD операції, імпорт/експорт
- **Замовлення** - управління статусами
- **Клієнти** - база клієнтів
- **Категорії** - ієрархічні категорії
- **Атрибути** - EAV система для динамічних характеристик товарів
- **Акції** - управління промокодами
- **Аналітика** - графіки та звіти
- **Налаштування** - конфігурація магазину
- **Імпорт** - імпорт з Excel/CSV
- **Інтеграції** - зовнішні сервіси
- **Відгуки** - модерація відгуків
- **Контент** - CMS для сторінок
- **Підтримка** - тікети підтримки
- **Користувачі** - ролі та права
- **Склад (WMS)** - повноцінна система управління складом

## EAV (Entity-Attribute-Value) - Система атрибутів товарів

Гнучка система для управління динамічними атрибутами товарів.

### Типи атрибутів

| Тип | Опис | Приклад |
|-----|------|---------|
| **text** | Текстове значення | Назва, опис |
| **number** | Числове значення з одиницями | Вага (кг), об'єм (л) |
| **select** | Вибір одного значення | Бренд, колір |
| **multiselect** | Множинний вибір | Функції, технології |
| **boolean** | Так/Ні | Підтримка 5G, NFC |
| **color** | Колір з HEX кодом | #000000 (Чорний) |
| **range** | Діапазон значень | Діагональ екрану 6.1"-6.7" |

### Функціональність

#### Адмін-панель атрибутів (`/admin/attributes`)
- Перегляд та управління атрибутами
- Створення атрибутів різних типів
- Групування атрибутів (Загальні, Дисплей, Камера...)
- Налаштування фільтрів для категорій

#### Сторінка товару
- Відображення характеристик по групах
- Варіанти товару (колір, пам'ять)
- Табличне відображення з одиницями виміру

#### Фільтри на сторінці категорії
- Динамічні фільтри залежно від категорії
- Фільтри: діапазон, мультивибір, колір, логіка
- Кольорові кружечки для фільтра кольору
- Підрахунок товарів для кожного значення

### Тестування

```bash
# Запуск тестів EAV системи
npm test -- --testPathPatterns="product-page|category-filters|attributes-page"
```

**Тестове покриття:** 98 тестів

Детальна документація ручного тестування: `docs/eav-manual-testing.md`

---

## WMS (Warehouse Management System)

Система управління складом доступна за адресою `/admin/warehouse` і включає:

### Основні функції

| Модуль | Опис | URL |
|--------|------|-----|
| **Дашборд** | Огляд складів, KPI, сповіщення | `/admin/warehouse` |
| **Склади** | Управління складами та магазинами | `/admin/warehouse/warehouses` |
| **Залишки** | Перегляд залишків з фільтрами | `/admin/warehouse/stock` |
| **Приймання** | Оприбуткування від постачальників | `/admin/warehouse/receipt/new` |
| **Відвантаження** | Відправка замовлень | `/admin/warehouse/shipment/new` |
| **Переміщення** | Між складами та магазинами | `/admin/warehouse/transfer/new` |
| **Інвентаризація** | Перевірка залишків | `/admin/warehouse/inventory/new` |

### Розширені функції

| Модуль | Опис | URL |
|--------|------|-----|
| **Закупівлі** | Замовлення постачальникам | `/admin/warehouse/purchases` |
| **Місця зберігання** | Ієрархія зон/стелажів/полиць | `/admin/warehouse/locations` |
| **Постачальники** | Довідник постачальників | `/admin/warehouse/suppliers` |
| **Списання** | Акти списання | `/admin/warehouse/writeoff/new` |
| **Історія рухів** | Журнал всіх операцій | `/admin/warehouse/movements` |
| **Серійні номери** | Облік серійників та партій | `/admin/warehouse/serials` |
| **Резервування** | Перегляд резервів | `/admin/warehouse/reservations` |
| **Налаштування** | Мін. залишки, авто-замовлення | `/admin/warehouse/settings` |
| **Звіти** | ABC/XYZ аналіз, оборотність | `/admin/warehouse/reports` |

### POS (Point of Sale)

Касова система для роздрібної торгівлі `/admin/warehouse/pos`:

- Швидкий пошук товарів
- Фільтрація за категоріями
- Кошик з редагуванням кількості
- Знижки на чек
- Оплата: готівка, картка, Apple/Google Pay
- Розрахунок здачі
- Друк чеків
- Клавіатурні скорочення (F2, F3, Escape)

### Мобільний сканер

Система для сканування штрих-кодів телефоном `/admin/warehouse/scanner`:

```
Як використовувати:

1. На комп'ютері:
   - Відкрийте /admin/warehouse/scanner
   - Натисніть "Я на комп'ютері"
   - Отримайте 6-значний код та QR-код

2. На телефоні (два способи):
   a) Відскануйте QR-код камерою телефону
   b) Відкрийте ту ж сторінку та введіть код

3. Скануйте товари телефоном - дані з'являються на комп'ютері в реальному часі
```

**Особливості:**
- QR-код для швидкого підключення
- Синхронізація в реальному часі
- Звукові сигнали при скануванні
- Ручний ввід штрих-коду
- Історія сканувань

### ABC/XYZ Аналіз

Звіти включають аналітику товарів:

- **ABC** - класифікація за обсягом продажів (A/B/C)
- **XYZ** - класифікація за стабільністю попиту (X/Y/Z)
- **Матриця ABC-XYZ** - комбінований аналіз
- **Оборотність** - дні в запасі, швидкість продажу
- **Мертвий запас** - товари без руху

## ProductCard - Особливості

Компонент картки товару підтримує:

- Відображення знижки (стара/нова ціна)
- Бейджі "Новинка" та "Хіт продажів"
- Індикатор наявності (в наявності / залишилось X шт / немає)
- Додавання в список бажань
- Швидкий перегляд
- Адаптивний дизайн

```tsx
<ProductCard
  product={product}
  showQuickView={true}
/>
```

## Змінні оточення

```env
# Backend API
NEXT_PUBLIC_API_URL=http://localhost:8080
```

## Скрипти

```json
{
  "dev": "next dev --turbopack",
  "build": "next build",
  "start": "next start",
  "lint": "next lint",
  "test": "jest",
  "test:watch": "jest --watch",
  "test:coverage": "jest --coverage"
}
```

## Маркетинг та лояльність

### Промокоди (`/admin/marketing/promo-codes`)

Система управління промокодами з підтримкою:
- **Типи знижок**: відсоток, фіксована сума, безкоштовна доставка, buy X get Y
- **Обмеження**: мінімальна сума, максимальна знижка, ліміт використань
- **Терміни дії**: дата початку та закінчення
- **Статистика**: використання, конверсія

### Програма лояльності (`/profile/loyalty`)

4-рівнева система лояльності:

| Рівень | Мін. балів | Множник | Знижка |
|--------|-----------|---------|--------|
| Bronze | 0 | x1.0 | 0% |
| Silver | 1,000 | x1.25 | 3% |
| Gold | 5,000 | x1.5 | 5% |
| Platinum | 15,000 | x2.0 | 10% |

**Нарахування**: 10 грн = 1 бал × множник рівня
**Використання**: 1 бал = 1 грн знижки

### Подарункові сертифікати (`/gift-cards`)

- **Номінали**: 250, 500, 1000, 2000 грн
- **Дизайни**: день народження, універсальний, свято, подяка
- **Персоналізація**: повідомлення, дані отримувача
- **Перевірка балансу**: за кодом сертифіката

## Email маркетинг (`/admin/marketing/email-campaigns`)

- Створення та редагування кампаній
- Шаблони листів
- Сегментація аудиторії
- Статистика: відкриття, кліки, відписки
- Планування відправки

## SEO

### Meta теги
```typescript
import { defaultSEO, generateProductJsonLd } from '@/lib/seo-config';
```

### Структуровані дані (JSON-LD)
- `Product` - товари з ціною, наявністю, рейтингом
- `Organization` - інформація про компанію
- `BreadcrumbList` - хлібні крихти
- `FAQPage` - FAQ секції
- `LocalBusiness` - локальний бізнес
- `SearchAction` - пошук на сайті

### Sitemap та Robots
- `/sitemap.xml` - автоматична генерація
- `/robots.txt` - правила індексації

## PWA (Progressive Web App)

### Можливості
- **Офлайн режим**: Service Worker кешує статичні ресурси
- **Встановлення**: Add to Home Screen на Android/iOS
- **Push сповіщення**: Web Push API
- **Background Sync**: синхронізація кошика

### Стратегії кешування
- **API запити**: Network First
- **Зображення**: Cache First
- **Статичні файли**: Cache First
- **HTML сторінки**: Network First

### Ярлики (Shortcuts)
- Каталог → `/catalog`
- Кошик → `/cart`
- Відстеження → `/tracking`

## Docker та CI/CD

### Локальний запуск з Docker

```bash
# Запуск всіх сервісів
docker-compose up -d

# Тільки база даних
docker-compose up -d db redis

# Перегляд логів
docker-compose logs -f storefront
```

### Сервіси docker-compose

| Сервіс | Порт | Опис |
|--------|------|------|
| storefront | 3000 | Next.js додаток |
| db | 5432 | PostgreSQL 15 |
| redis | 6379 | Redis кеш |
| nginx | 80, 443 | Reverse proxy (production) |

### CI/CD Pipeline

GitHub Actions workflow включає:
1. **Lint & Type Check** - ESLint, TypeScript
2. **Tests** - Jest з покриттям
3. **Build** - Next.js production build
4. **Docker** - Build & push image
5. **Deploy Staging** - автоматично
6. **Deploy Production** - manual approval
7. **Security Scan** - npm audit, Snyk
8. **Lighthouse** - performance audit

## Документація

- `docs/testing/manual-testing-guide.md` - посібник з ручного тестування
- `docs/eav-manual-testing.md` - тестування EAV системи

## Ліцензія

Приватний проект.
